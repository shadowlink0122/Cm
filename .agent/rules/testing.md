# テスト規約

## テストファイル配置
```
tests/test_programs/    - Cm言語テスト
  ├── <カテゴリ>/       - 機能別ディレクトリ
  │   ├── test.cm       - テストコード
  │   ├── test.expect   - 期待出力
  │   └── test.error    - 期待エラー（エラーテスト用）
```

## テスト命名規則
- ファイル名: snake_case
- 機能を説明する名前（例: `slice_basic.cm`）
- **フォルダ名をファイル名に含めない**
  - ❌ `enum/enum_match.cm` → ❌ 冗長
  - ✅ `enum/match.cm` → ✅ 簡潔

## テスト作成ガイドライン
1. **1テスト1機能** - 単一の機能をテスト
2. **PASS/FAILを明示** - 出力に成功/失敗を含める
3. **境界値テスト** - エッジケースを含める
4. **エラーケース** - `.error`ファイルでエラーテスト

## テスト実行コマンド
```bash
make tip      # インタプリタテスト（高速、開発中推奨）
make tlp      # LLVMネイティブテスト（並列）
make tlwp     # WASMテスト
make tjp      # JavaScriptテスト
```

> [!IMPORTANT]
> **開発中のテストは `make tip` または個別実行で確認する**
> `make tl` は最終確認時のみ使用（時間がかかるため）

## スキップ方法
- `.skip`ファイルを作成（特定ターゲット用: `test.skip.llvm`）
- 理由をコメントで記載

## 新機能追加時
1. テストを先に作成（TDD推奨）
2. 期待出力を定義
3. 実装後にテスト実行
4. 全テストスイートで回帰確認
