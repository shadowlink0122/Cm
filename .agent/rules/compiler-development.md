# Cm コンパイラ開発ルール

## プロジェクトの目標と思想

### 目標
**OS/ベアメタル開発からWebアプリケーションまで、単一言語で実現する**

### 設計思想
- **C++にモダン言語の良いところを取り入れる**
- 複雑な単語や言語機能を避ける
- シンプルで直感的な構文を維持
- Rust風の構文は使用しない（`fn`, `->`等）

## 一貫性の原則（重要）

コンパイラ開発時は、以下の項目を**すべて一貫して**更新すること。
コンパイラだけ開発して他を放置するのは**技術的負債**になる。

| 項目 | 確認事項 |
|------|----------|
| コンパイラ実装 | 機能が正しく動作する |
| テスト | 新機能にテスト追加 |
| lint/format | `cm lint`, `cm fmt` が対応 |
| tutorials/ | 機能変更・追加を反映 |
| README.md | 機能一覧を更新 |
| VERSION | バージョン番号を更新 |
| docs/ | 設計ドキュメント更新 |

## ドキュメント管理

### プレフィックス規則
生成したドキュメントには検討順を把握するため`00N_`プレフィックスを付ける：
```
001_initial_design.md
002_implementation_plan.md
003_review_notes.md
```

### アーカイブ
実装完了したドキュメントは`docs/archive/`に移動：
```bash
mv docs/design/xxx.md docs/archive/
```

## コード品質

### srcディレクトリの清潔さ
- 不要なファイルや実装を残さない
- 未使用のinclude文を削除
- デッドコードを除去
- 定期的にコードレビュー

### デバッグモードの活用
- 開発には常に`-d`（デバッグモード）を使用
- 不要なデバッグ出力は削除ではなく、デバッグモードで活かす
- `debug_msg`で適切にログ出力

```bash
# 開発時
./cm compile -d <file.cm>

# リリース時はデバッグ出力なし
./cm compile <file.cm>
```

## リリース時の必須作業

1. **VERSION ファイル更新**
2. **README.md 更新** - 機能一覧、使用例
3. **リリースノート作成** - docs/PR.md
4. **tutorials/ 更新** - 新機能のドキュメント
5. **docs/archive/** - 完了ドキュメント移動
6. **テスト全パス確認**
