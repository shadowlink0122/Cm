---
description: 新機能の実装手順
---

# 新機能実装ワークフロー

## 0. 事前確認
- ROADMAPとの整合性確認
- プロジェクト思想（C++ベース、シンプル構文）に沿っているか
- OS/ベアメタル〜Webアプリまでをカバーする設計か

## 1. 設計フェーズ
// turbo
1. `docs/design/`に設計ドキュメント作成
   - ファイル名に`00N_`プレフィックスを付ける（例: `001_feature_design.md`）
2. 既存機能への影響分析
3. 破壊的変更の有無を確認

## 2. テスト作成（TDD）
// turbo
1. `tests/test_programs/<category>/`にテスト作成
2. `.expect`ファイルで期待出力定義
3. 初回テスト実行（失敗確認）

## 3. 実装フェーズ
1. 最小限の実装から開始
2. 段階的に機能追加
3. 各段階でテスト実行
4. **デバッグモード`-d`を常に使用**

## 4. 検証フェーズ
// turbo
1. `make build` でビルド確認
2. `make tip` でインタプリタテスト
3. `make tlp` でLLVMテスト
4. 全テスト通過を確認

## 5. 品質確認
// turbo
1. `cm lint` で警告確認
2. `cm fmt` でフォーマット統一
3. 不要なコード・ファイルを削除
4. 不要なデバッグ出力はデバッグモードに活かす

## 6. ドキュメント更新
1. tutorials/ に機能説明を追加
2. README.md を更新（機能一覧）
3. 設計ドキュメントを`docs/archive/`に移動（実装完了時）

## 7. コミット
// turbo
1. 変更をコミット
2. 一貫性チェック：
   - [ ] コンパイラ実装 ✓
   - [ ] テスト追加 ✓
   - [ ] lint/format対応 ✓
   - [ ] tutorials更新 ✓
   - [ ] README更新 ✓
