# Cm言語 未実装機能とマイルストーン整理

**作成日**: 2026-02-04
**現在のバージョン**: v0.13.0（feature/v0.13.0ブランチで開発中）

---

## 📊 バージョン状況まとめ

| バージョン | 状態 | 主な機能 |
|-----------|------|---------|
| v0.10.0 | ✅ 完了 | モジュール、FFI、ラムダ、クロージャ、動的スライス |
| v0.11.0 | ✅ 完了 | 安定性修正、FFI/ABI互換、静的解析強化、イテレータ拡張、File I/O |
| v0.12.0 | ✅ 完了 | Lint/Formatter、const強化、末尾呼び出し最適化、多次元配列最適化 |
| v0.13.0 | 🚧 開発中 | スレッド、診断カタログ拡充、ジェネリックコンストラクタ、Tagged Union |
| v0.14.0+ | 📋 将来 | インラインアセンブリ、async/await、ベアメタル |

---

## 🔴 未実装の言語機能（優先度順）

### 高優先度（v0.13.0で実装中）

| 機能 | 状態 | 説明 |
|------|------|------|
| ジェネリックコンストラクタ | ✅ 実装済み | 名前ベースのフォールバック機構 |
| 診断カタログ拡充 | ✅ 実装済み | E300-E699, W100-W401, L200-L402 |
| Tagged Union | ✅ 基本実装 | 関連データ付きenum |
| match分解 | ✅ 基本実装 | `Some(x) => ...` 形式 |
| スレッド | ✅ 実装済み | `std::thread`モジュール |
| Mutex | ✅ 実装済み | `std::sync::Mutex` |

### 中優先度（v0.14.0で計画）

| 機能 | 状態 | 説明 |
|------|------|------|
| インラインアセンブリ (`asm`) | ⬜ | 低レベルハードウェアアクセス |
| `for (i in 0..n)` | ⬜ | 範囲イテレータ |
| 参照型 (`&T`) | 🔧 部分実装 | 借用チェック付き参照 |
| 借用チェッカー | 🔧 部分実装 | 二重可変借用検出など |

### 低優先度（v0.15.0以降）

| 機能 | 状態 | 説明 |
|------|------|------|
| async/await | ⬜ | 非同期処理 |
| Future型 | ⬜ | 非同期計算の抽象化 |
| 関数マクロ | ⬜ | `macro foo(x) { ... }` |
| パッケージ管理 | ⬜ | `cm pkg init/add` |

---

## ✅ 実装済み機能（v0.10.0〜v0.13.0）

### v0.10.0 完了機能
- モジュールシステム (import/export)
- FFI (`use libc { ... }`)
- ラムダ式 (`(params) => { body }`)
- クロージャ（変数キャプチャ）
- 動的スライス (`T[]`, `T[][]`)
- 高階関数 (map/filter/reduce/some/every/find)
- no_std対応
- Debug/Display自動実装

### v0.11.0 完了機能
- 型チェッカー再帰ガード
- C ABI値渡し修正
- 配列境界チェック生成
- 一時文字列プール基盤
- 警告システム基盤
- const推奨警告
- 初期化前使用チェック
- エラー報告統一
- イテレータ拡張 (`std::iter`)
- File I/O (`std::fs`)
- stdin入力 (`std::io`)

### v0.12.0 完了機能
- `cm lint` コマンド
- `cm fmt` コマンド
- 未使用変数警告
- const強化（配列サイズにconst使用可能）
- 末尾呼び出し最適化
- 多次元配列最適化

### v0.13.0 完了機能
- ジェネリックコンストラクタサポート
- 診断カタログ拡充（E300-E699, W100-W401, L200-L402）
- ポインタエラーメッセージ改善（`->` 演算子提案）
- スレッドモジュール (`std::thread`)
- Mutex (`std::sync::Mutex`)
- Tagged Union基本サポート

---

## ⚠️ 既知の制限（v0.13.0時点）

### Tagged Union (enum)
| 制限 | 説明 | 回避策 |
|------|------|--------|
| バリアントはプリミティブ型のみ | 構造体をバリアントとして使用すると、match抽出時に型推論が失敗 | プリミティブ型（int, bool, long等）のみ使用 |
| 複数フィールド非対応 | `Some(x, y)`形式は未対応 | 単一フィールドのみ使用 |

### ジェネリクス
| 制限 | 説明 | 回避策 |
|------|------|--------|
| 2型パラメータ `HashMap<K, V>` | LLVMバックエンドの制限でサポート外 | キーをint固定にした`HashMap<V>`を使用 |

---

## 📚 参考ドキュメント

- **ROADMAP.md**: 全体ロードマップ
- **docs/FEATURES.md**: 実装済み機能一覧
- **docs/releases/v0.13.0.md**: v0.13.0リリースノート
