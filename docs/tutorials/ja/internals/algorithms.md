---
title: å†…éƒ¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
parent: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å†…éƒ¨
---

[English](../../en/internals/algorithms.html)

# ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å†…éƒ¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

**å­¦ç¿’ç›®æ¨™:** Cmã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç†è§£ã—ã¾ã™ã€‚  
**æ‰€è¦æ™‚é–“:** 20åˆ†  
**é›£æ˜“åº¦:** ğŸ”´ ä¸Šç´š

---

## æ¦‚è¦

Cmã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ç†è«–ã®æ¨™æº–çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è§£æ

### Work-listã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

åæŸã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—è§£æã‚’è¡Œã„ã¾ã™ã€‚

**ä½¿ç”¨ç®‡æ‰€:** SCCP, å®šæ•°ä¼æ’­, ç”Ÿå­˜å¤‰æ•°è§£æ

```
Input:  CFG (Control Flow Graph)
Output: å„ãƒã‚¤ãƒ³ãƒˆã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼æƒ…å ±

worklist = å…¨åŸºæœ¬ãƒ–ãƒ­ãƒƒã‚¯
while worklist is not empty:
    block = worklist.pop()
    old_out = out[block]
    in[block] = meet(predecessors(block))
    out[block] = transfer(block, in[block])
    if out[block] != old_out:
        add successors to worklist
```

---

## åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼è§£æ

### Tarjan's SCCï¼ˆå¼·é€£çµæˆåˆ†åˆ†è§£ï¼‰

å¾ªç’°ä¾å­˜ã‚’æ¤œå‡ºã—ã¾ã™ã€‚

**ä½¿ç”¨ç®‡æ‰€:** ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¾ªç’°ä¾å­˜æ¤œå‡º

```
æ™‚é–“è¨ˆç®—é‡: O(V + E)
ç©ºé–“è¨ˆç®—é‡: O(V)
```

### æ”¯é…æœ¨ï¼ˆDominator Treeï¼‰

ã‚ã‚‹åœ°ç‚¹ã‚’å¿…ãšé€šéã™ã‚‹ã‹åˆ¤å®šã—ã¾ã™ã€‚

**ä½¿ç”¨ç®‡æ‰€:** LICMï¼ˆãƒ«ãƒ¼ãƒ—æ¤œå‡ºï¼‰ã€SSAæ§‹ç¯‰

---

## ä¸­é–“è¡¨ç¾

### SSAå½¢å¼ï¼ˆStatic Single Assignmentï¼‰

å„å¤‰æ•°ã¸ã®ä»£å…¥ã‚’1å›ã«é™å®šã—ãŸå½¢å¼ã€‚

**åˆ©ç‚¹:**
- Use-Defãƒã‚§ãƒ¼ãƒ³ã®åŠ¹ç‡åŒ–
- å®šæ•°ä¼æ’­ã®ç°¡æ˜“åŒ–
- ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰æ¤œå‡ºã®å®¹æ˜“åŒ–

```cm
// é€šå¸¸ã®ã‚³ãƒ¼ãƒ‰
x = 1;
x = 2;
y = x;

// SSAå½¢å¼
x_1 = 1;
x_2 = 2;
y = x_2;
```

### Ï†é–¢æ•°ï¼ˆPhi Functionï¼‰

è¤‡æ•°ã®çµŒè·¯ã‹ã‚‰ã®å€¤ã‚’çµ±åˆã—ã¾ã™ã€‚

```
if (cond) {
    x_1 = 10;
} else {
    x_2 = 20;
}
// å®Ÿè¡ŒçµŒè·¯ã«å¿œã˜ãŸå€¤ã‚’é¸æŠ
x_3 = Ï†(x_1, x_2); 
```

---

## æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### Value Numbering

å¼ã®ç­‰ä¾¡æ€§ã‚’ãƒãƒƒã‚·ãƒ¥ã§åˆ¤å®šã—ã¾ã™ã€‚

**ä½¿ç”¨ç®‡æ‰€:** GVNï¼ˆå…±é€šéƒ¨åˆ†å¼é™¤å»ï¼‰

```cm
// åŒã˜æ¼”ç®—ã«ã¯åŒã˜ç•ªå·ã‚’å‰²ã‚Šå½“ã¦ã‚‹
int a = x + y; // v1 = Add(vx, vy)
int b = x + y; // v1 = Add(vx, vy) -> å†è¨ˆç®—ä¸è¦
```

### ãƒ«ãƒ¼ãƒ—è§£æ

ãƒ«ãƒ¼ãƒ—æ§‹é€ ã‚’ç‰¹å®šã—ã¦LICMã‚’é©ç”¨ã—ã¾ã™ã€‚

1. ãƒãƒƒã‚¯ã‚¨ãƒƒã‚¸æ¤œå‡ºï¼ˆå¾Œé€€è¾ºï¼‰
2. ãƒ«ãƒ¼ãƒ—ãƒ˜ãƒƒãƒ€ç‰¹å®š
3. ãƒ«ãƒ¼ãƒ—æœ¬ä½“ã®åé›†
4. ä¸å¤‰å¼ã®ç‰¹å®š

---

## å‹ã‚·ã‚¹ãƒ†ãƒ 

### Monomorphizationï¼ˆå˜ç›¸åŒ–ï¼‰

ã‚¸ã‚§ãƒãƒªãƒƒã‚¯é–¢æ•°ã‚’å…·è±¡å‹ã”ã¨ã«ç”Ÿæˆã—ã¾ã™ã€‚

```cm
// ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å®šç¾©
<T> T identity(T x) { return x; }

// ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰
int identity__int(int x) { return x; }
string identity__string(string x) { return x; }
```

---

## å‚è€ƒè³‡æ–™

- [æœ€é©åŒ–ãƒ‘ã‚¹](optimization.html) - å„ãƒ‘ã‚¹ã®è©³ç´°
- [Engineering a Compiler](https://www.elsevier.com/books/engineering-a-compiler/cooper/978-0-12-815412-0) - Cooper & Torczon
- [SSA-based Compiler Design](https://link.springer.com/book/10.1007/978-3-030-80515-9) - SSAã®è©³ç´°
