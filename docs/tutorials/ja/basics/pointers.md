---
title: ãƒã‚¤ãƒ³ã‚¿
parent: Tutorials
---

[English](../../en/basics/pointers.html)

# ãƒã‚¤ãƒ³ã‚¿ï¼ˆPointersï¼‰

Cmè¨€èªã®ãƒã‚¤ãƒ³ã‚¿ã¯ã€C/C++äº’æ›ã®ãƒ¡ãƒ¢ãƒªã‚¢ãƒ‰ãƒ¬ã‚¹æ“ä½œã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [åŸºæœ¬çš„ãªä½¿ã„æ–¹](#åŸºæœ¬çš„ãªä½¿ã„æ–¹)
- [ãƒã‚¤ãƒ³ã‚¿å®£è¨€](#ãƒã‚¤ãƒ³ã‚¿å®£è¨€)
- [ã‚¢ãƒ‰ãƒ¬ã‚¹æ¼”ç®—å­](#ã‚¢ãƒ‰ãƒ¬ã‚¹æ¼”ç®—å­)
- [ãƒ‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#ãƒ‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)
- [ãƒã‚¤ãƒ³ã‚¿æ¼”ç®—](#ãƒã‚¤ãƒ³ã‚¿æ¼”ç®—)
- [æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿](#æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿)
- [é…åˆ—ã¨ãƒã‚¤ãƒ³ã‚¿](#é…åˆ—ã¨ãƒã‚¤ãƒ³ã‚¿)
- [é–¢æ•°ãƒã‚¤ãƒ³ã‚¿](#é–¢æ•°ãƒã‚¤ãƒ³ã‚¿)

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ãƒã‚¤ãƒ³ã‚¿å®£è¨€

```cm
// åŸºæœ¬çš„ãªãƒã‚¤ãƒ³ã‚¿å®£è¨€
int* p;

// è¤‡æ•°ã®ãƒã‚¤ãƒ³ã‚¿
int* a, *b, *c;

// ãƒã‚¤ãƒ³ã‚¿ã®ãƒã‚¤ãƒ³ã‚¿
int** pp;

struct Point { int x; int y; }

// æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿
Point* ptr;
```

## ã‚¢ãƒ‰ãƒ¬ã‚¹æ¼”ç®—å­

`&`æ¼”ç®—å­ã§å¤‰æ•°ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚

```cm
struct Point { int x; int y; }

int main() {
    int x = 42;
    int* p = &x;  // xã®ã‚¢ãƒ‰ãƒ¬ã‚¹

    Point pt = Point(10, 20);
    Point* ptr = &pt;  // ptã®ã‚¢ãƒ‰ãƒ¬ã‚¹
    return 0;
}
```

## ãƒ‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

`*`æ¼”ç®—å­ã§ãƒã‚¤ãƒ³ã‚¿ã®å‚ç…§å…ˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

```cm
int main() {
    int x = 10;
    int* p = &x;

    // èª­ã¿å–ã‚Š
    int value = *p;  // 10

    // æ›¸ãè¾¼ã¿
    *p = 20;
    // xã¯20ã«ãªã‚‹
    return 0;
}
```

## ãƒã‚¤ãƒ³ã‚¿æ¼”ç®—

```cm
int main() {
    int[5] arr = {1, 2, 3, 4, 5};
    int* p = arr;  // é…åˆ—ã®å…ˆé ­ã‚¢ãƒ‰ãƒ¬ã‚¹

    // ãƒã‚¤ãƒ³ã‚¿ã®åŠ ç®—
    int first = *p;      // 1
    int second = *(p + 1);  // 2
    int third = *(p + 2);   // 3

    // ãƒã‚¤ãƒ³ã‚¿ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
    p++;
    int value = *p;  // 2

    // ãƒã‚¤ãƒ³ã‚¿ãƒ«ãƒ¼ãƒ—
    int* end = arr + 5;
    for (int* iter = arr; iter != end; iter++) {
        println("{}", *iter);
    }
    return 0;
}
```

## æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿

### åŸºæœ¬çš„ãªã‚¢ã‚¯ã‚»ã‚¹

```cm
struct Point {
    int x;
    int y;
}

int main() {
    Point pt = Point(10, 20);
    Point* ptr = &pt;

    // (*ptr).x ã§ã‚¢ã‚¯ã‚»ã‚¹
    (*ptr).x = 30;
    (*ptr).y = 40;

    // -> æ¼”ç®—å­ï¼ˆå°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Ÿè£…äºˆå®šï¼‰
    // ptr->x = 30;
    // ptr->y = 40;
    return 0;
}
```

### ãƒã‚¤ãƒ³ã‚¿çµŒç”±ã®é–¢æ•°å‘¼ã³å‡ºã—

```cm
interface Printable {
    void print();
}

struct Point { int x; int y; }

impl Point for Printable {
    void print() {
        println("({}, {})", self.x, self.y);
    }
}

int main() {
    Point pt = Point(5, 10);
    Point* ptr = &pt;
    
    (*ptr).print();  // "(5, 10)"
    return 0;
}
```

## é…åˆ—ã¨ãƒã‚¤ãƒ³ã‚¿

### Array Decay

é…åˆ—ã¯è‡ªå‹•çš„ã«ãƒã‚¤ãƒ³ã‚¿ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚

```cm
int main() {
    int[5] arr = {1, 2, 3, 4, 5};

    // æš—é»™çš„å¤‰æ›
    int* p = arr;  // arr[0]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹
    return 0;
}

// é–¢æ•°ã«æ¸¡ã™
void process(int* data, int size) {
    for (int i = 0; i < size; i++) {
        data[i] *= 2;
    }
}

int main() {
    int[5] arr = {1, 2, 3, 4, 5};
    process(arr, 5);  // é…åˆ—â†’ãƒã‚¤ãƒ³ã‚¿å¤‰æ›
    return 0;
}
```

### ãƒã‚¤ãƒ³ã‚¿ã¨é…åˆ—ã®ç­‰ä¾¡æ€§

```cm
int main() {
    int[5] arr = {10, 20, 30, 40, 50};
    int* p = arr;

    // ä»¥ä¸‹ã¯å…¨ã¦åŒã˜
    int v1 = arr[2];   // 30
    int v2 = p[2];     // 30
    int v3 = *(p + 2); // 30
    int v4 = *(arr + 2);  // 30
    return 0;
}
```

## é–¢æ•°ãƒã‚¤ãƒ³ã‚¿

### é–¢æ•°ãƒã‚¤ãƒ³ã‚¿å®£è¨€

```cm
// é–¢æ•°ãƒã‚¤ãƒ³ã‚¿å‹: æˆ»ã‚Šå€¤å‹*(å¼•æ•°å‹...)
int*(int, int) op;

int add(int a, int b) {
    return a + b;
}

int multiply(int a, int b) {
    return a * b;
}

int main() {
    // é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã«ä»£å…¥
    op = add;
    int result1 = op(10, 20);  // 30
    
    op = multiply;
    int result2 = op(10, 20);  // 200
    
    return 0;
}
```

### é«˜éšé–¢æ•°

```cm
// é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã‚’å¼•æ•°ã«å–ã‚‹é–¢æ•°
int apply(int*(int, int) fn, int x, int y) {
    return fn(x, y);
}

int max(int a, int b) {
    return a > b ? a : b;
}

int min(int a, int b) {
    return a < b ? a : b;
}

int main() {
    int result1 = apply(max, 10, 5);  // 10
    int result2 = apply(min, 10, 5);  // 5
    return 0;
}
```

## Null ãƒã‚¤ãƒ³ã‚¿

```cm
int main() {
    // Nullãƒã‚¤ãƒ³ã‚¿
    int* p = null;

    // Nullãƒã‚§ãƒƒã‚¯
    if (p == null) {
        println("Pointer is null");
    }

    // Nullãƒã‚¤ãƒ³ã‚¿ã®ãƒ‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯æœªå®šç¾©å‹•ä½œ
    // *p = 10;  // å±é™ºï¼
    return 0;
}
```

## typedefå‹ãƒã‚¤ãƒ³ã‚¿

```cm
typedef MyInt = int;
typedef MyFloat = float;

// typedefå‹ã®ãƒã‚¤ãƒ³ã‚¿
MyInt* p1;
MyFloat* p2;

int main() {
    MyInt x = 42;
    p1 = &x;
    return 0;
}

// ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã§ã¯å‹•ä½œ
// LLVM/WASMã‚µãƒãƒ¼ãƒˆã¯v0.10.0äºˆå®š
```

## å®Ÿè£…çŠ¶æ³

| æ©Ÿèƒ½ | ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ | LLVM | WASM |
|------|------------|------|------|
| åŸºæœ¬çš„ãªãƒã‚¤ãƒ³ã‚¿ | âœ… | âœ… | âœ… |
| ãƒ‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ | âœ… | âœ… | âœ… |
| ãƒã‚¤ãƒ³ã‚¿æ¼”ç®— | âœ… | âœ… | âœ… |
| æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿ | âœ… | âœ… | âœ… |
| é…åˆ—â†’ãƒã‚¤ãƒ³ã‚¿ | âœ… | âœ… | âœ… |
| é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ | âœ… | âœ… | âœ… |
| typedefå‹ãƒã‚¤ãƒ³ã‚¿ | âœ… | âš ï¸ v0.10.0 | âš ï¸ v0.10.0 |

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

å®Œå…¨ãªã‚µãƒ³ãƒ—ãƒ«ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- `examples/pointers/basic_pointer.cm` - åŸºæœ¬çš„ãªãƒã‚¤ãƒ³ã‚¿æ“ä½œ
- `examples/pointers/struct_pointer.cm` - æ§‹é€ ä½“ãƒã‚¤ãƒ³ã‚¿
- `examples/pointers/function_pointer.cm` - é–¢æ•°ãƒã‚¤ãƒ³ã‚¿
- `tests/test_programs/pointer/` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [é…åˆ—](arrays.html) - é…åˆ—æ“ä½œ
- ãƒ¡ãƒ¢ãƒªç®¡ç† - ãƒ¡ãƒ¢ãƒªå®‰å…¨æ€§
- å‹ã‚·ã‚¹ãƒ†ãƒ  - å‹ã®è©³ç´°

---

**æ›´æ–°æ—¥:** 2025-12-16