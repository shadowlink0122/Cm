# v0.11.0 改善項目総覧

## 1. ベアメタル/UEFI対応阻害要因

### libc依存
| 場所 | 関数 | 問題 |
|------|------|------|
| `context.cpp` | `malloc/free` | stdモードでlibc依存 |
| `runtime_alloc.c` | `malloc()` | ランタイムがlibc前提 |
| `expr_call.cpp` | `cm_println_*` | 標準出力依存 |

### 改善案
- `#[no_std]`属性でlibc関数呼び出し禁止
- カスタムアロケータ経由のメモリ確保
- 出力関数のプラットフォーム抽象化

---

## 2. イテレータ拡張

### 未実装機能
- `for ((index, item) in arr)` - インデックス付きイテレーション
- `0..10` - 範囲イテレータ
- `arr.enumerate()` - enumerate メソッド

### 設計方針
- 既存の`for (item in arr)`を拡張
- タプル分解パターンのサポート

---

## 3. JS生成改善

### 課題
- 構造制御フロー（if/else再構築）の不完全
- バーチャルディスパッチ未対応
- 一部スキップテスト残存

### 優先改善
- interface動的ディスパッチ
- 負のスライスインデックス

---

## 4. 所有権システム完成

### 実装済み (v0.10.0+)
- [x] moveキーワード
- [x] use-after-move検出
- [x] const外し禁止
- [x] 借用中move禁止

### 未実装
- [ ] フィールド借用追跡
- [ ] 制御フロー分析（if/else分岐）
- [ ] async対応準備

---

## 5. コード品質改善

### TODO項目（要対応）
| ファイル | 内容 |
|---------|------|
| `stmt.cpp:67` | 構造体サイズ計算 |
| `folding.hpp:340` | 浮動小数点演算 |
| `lowering.hpp:1329` | ハッシュ関数改善 |
| `parser_module.cpp` | constexpr/template対応 |
| `vectorizer.cpp` | ベクトル化完全実装 |

---

## 優先順位

| 優先度 | 項目 | 理由 |
|--------|------|------|
| 🔴 高 | ベアメタル/UEFI | ユーザー要望 |
| 🟠 中 | イテレータ拡張 | ロードマップ記載 |
| 🟡 低 | JS改善 | 機能完成度向上 |
