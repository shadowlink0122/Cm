// tests/test_programs/asm/asm_compare_branch.cm
// 比較・分岐命令のテスト

import std::io::println;

int main() {
    int x = 10;
    int y = 20;

    // 比較命令
    asm("cmp {x}, {y}");
    println("asm: cmp instruction");

    asm("test %rax, %rax");
    println("asm: test instruction");

    // 無条件ジャンプ
    asm("jmp .L_skip");
    println("asm: jmp instruction");

    // 条件付きジャンプ
    asm("je .L_equal");
    println("asm: je (jump if equal)");

    asm("jne .L_not_equal");
    println("asm: jne (jump if not equal)");

    asm("jg .L_greater");
    println("asm: jg (jump if greater)");

    asm("jl .L_less");
    println("asm: jl (jump if less)");

    asm("jge .L_greater_equal");
    println("asm: jge (jump if greater or equal)");

    asm("jle .L_less_equal");
    println("asm: jle (jump if less or equal)");

    // ループ命令
    asm("loop .L_loop_start");
    println("asm: loop instruction");

    // call/ret命令
    asm("call my_function");
    println("asm: call instruction");

    asm("ret");
    println("asm: ret instruction");

    return 0;
}