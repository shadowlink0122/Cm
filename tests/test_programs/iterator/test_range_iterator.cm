import std::io::println;

// RangeIterator テスト
// impl内メソッドを使用したRangeベースのイテレータ

struct Range {
    int start;
    int end;
    int step;
}

struct RangeIterator {
    int current;
    int end;
    int step;
}

impl RangeIterator {
    self(int start, int end, int step) {
        self.current = start;
        self.end = end;
        self.step = step;
    }
    
    bool has_next() {
        if (self.step > 0) {
            return self.current < self.end;
        } else {
            return self.current > self.end;
        }
    }
    
    int next() {
        int value = self.current;
        self.current = self.current + self.step;
        return value;
    }
    
    int peek() {
        return self.current;
    }
}

int main() {
    // 0..5 の範囲をイテレート
    RangeIterator iter = RangeIterator(0, 5, 1);
    
    println("Range 0..5:");
    int sum = 0;
    while (iter.has_next()) {
        int val = iter.next();
        sum = sum + val;
    }
    println("sum: {sum}");
    
    // 10..0 step -2 の範囲をイテレート
    RangeIterator iter2 = RangeIterator(10, 0, -2);
    
    println("Range 10..0 step -2:");
    int sum2 = 0;
    while (iter2.has_next()) {
        int val = iter2.next();
        sum2 = sum2 + val;
    }
    println("sum: {sum2}");
    
    return 0;
}
