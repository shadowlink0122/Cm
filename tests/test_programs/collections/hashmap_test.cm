// ジェネリックHashMap<K,V>テスト
import std::io::println;
import std::collections::hashmap::*;

// テスト用の構造体
struct Person {
    int id;
    int age;
}

int main() {
    println("=== Generic HashMap Test ===");

    // -------------------------------------------
    // 1. int -> int
    // -------------------------------------------
    println("1. HashMap<int, int>:");
    HashMap<int, int> m1 = hashmap_new<int, int>(16);
    m1.insert(1, 100);
    m1.insert(2, 200);
    m1.insert(3, 300);
    println("  len: {m1.len()}");
    println("  get(1): {m1.get(1)}");
    println("  get(2): {m1.get(2)}");
    println("  contains(3): {m1.contains(3)}");
    println("  contains(4): {m1.contains(4)}");
    m1.release();
    println("  freed");

    // -------------------------------------------
    // 2. int -> Person
    // -------------------------------------------
    println("2. HashMap<int, Person>:");
    HashMap<int, Person> m2 = hashmap_new<int, Person>(16);
    Person alice = Person { id: 1, age: 25 };
    Person bob = Person { id: 2, age: 30 };
    m2.insert(1, alice);
    m2.insert(2, bob);
    println("  len: {m2.len()}");
    Person p = m2.get(1);
    println("  get(1): id={p.id}, age={p.age}");
    m2.release();
    println("  freed");

    println("");
    println("=== PASS ===");
    return 0;
}
