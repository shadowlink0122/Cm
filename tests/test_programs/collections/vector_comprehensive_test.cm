// Vector<T>網羅テスト - 構造体とプリミティブ型を含む
// ジェネリクスの型パラメータ制限を調査
import std::io::println;
import std::collections::vector::*;

// テスト用構造体
struct Point {
    int x;
    int y;
}

struct Person {
    int id;
    int age;
}

// Note: Large構造体(32バイト)は既知のメモリ破壊問題あり - v0.14.0で対応予定

int main() {
    println("=== Vector<T> Comprehensive Test ===");

    // 1. Vector<int> - プリミティブ型
    println("1. Vector<int>:");
    Vector<int> vi();
    vi.push(10);
    vi.push(20);
    int v0 = vi.get(0);
    int v1 = vi.get(1);
    int len = vi.len();
    println("  len={len}, [{v0}, {v1}]");

    // 2. Vector<long> - 8バイトプリミティブ
    println("2. Vector<long>:");
    Vector<long> vl();
    vl.push(100000 as long);
    vl.push(200000 as long);
    long l0 = vl.get(0);
    long l1 = vl.get(1);
    len = vl.len();
    println("  len={len}, [{l0}, {l1}]");

    // 3. Vector<bool> - 1バイトプリミティブ
    println("3. Vector<bool>:");
    Vector<bool> vb();
    vb.push(true);
    vb.push(false);
    vb.push(true);
    bool b0 = vb.get(0);
    bool b1 = vb.get(1);
    bool b2 = vb.get(2);
    len = vb.len();
    println("  len={len}, [{b0}, {b1}, {b2}]");

    // 4. Vector<double> - 8バイト浮動小数点
    println("4. Vector<double>:");
    Vector<double> vd();
    vd.push(3.14159);
    vd.push(2.71828);
    double d0 = vd.get(0);
    double d1 = vd.get(1);
    len = vd.len();
    println("  len={len}, [{d0}, {d1}]");

    // 5. Vector<Point> - 構造体（8バイト）
    println("5. Vector<Point>:");
    Vector<Point> vp();
    Point p1;
    p1.x = 10;
    p1.y = 20;
    Point p2;
    p2.x = 30;
    p2.y = 40;
    vp.push(p1);
    vp.push(p2);
    Point got_p1 = vp.get(0);
    Point got_p2 = vp.get(1);
    len = vp.len();
    println("  len={len}");
    println("  p1: ({got_p1.x}, {got_p1.y})");
    println("  p2: ({got_p2.x}, {got_p2.y})");

    // 6. Vector<Person> - 別の構造体（8バイト）
    println("6. Vector<Person>:");
    Vector<Person> vper();
    Person per1;
    per1.id = 1;
    per1.age = 25;
    Person per2;
    per2.id = 2;
    per2.age = 30;
    vper.push(per1);
    vper.push(per2);
    Person got_per1 = vper.get(0);
    Person got_per2 = vper.get(1);
    len = vper.len();
    println("  len={len}");
    println("  per1: id={got_per1.id}, age={got_per1.age}");
    println("  per2: id={got_per2.id}, age={got_per2.age}");

    println("=== PASS ===");
    return 0;
}
