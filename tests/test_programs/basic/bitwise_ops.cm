import std::io::println;
// ビット演算子テスト
int main() {
    // AND
    int a = 0b1100;
    int b = 0b1010;
    int and_r = a & b;
    println("AND: {and_r}");

    // OR
    int or_r = a | b;
    println("OR: {or_r}");

    // XOR
    int xor_r = a ^ b;
    println("XOR: {xor_r}");

    // NOT
    int not_r = ~0;
    println("NOT ~0: {not_r}");

    // 左シフト
    int left = 1 << 3;
    println("1 << 3: {left}");

    // 右シフト
    int right = 16 >> 2;
    println("16 >> 2: {right}");

    // 複合代入
    int x = 0xFF;
    x &= 0x0F;
    println("0xFF & 0x0F: {x}");

    x |= 0x30;
    println("0x0F | 0x30: {x}");

    x ^= 0xFF;
    println("0x3F ^ 0xFF: {x}");

    x <<= 2;
    println("<<=2: {x}");

    x >>= 1;
    println(">>=1: {x}");

    // フラグ操作
    int flags = 0;
    flags = flags | (1 << 0);
    flags = flags | (1 << 2);
    println("flags after set 0,2: {flags}");

    flags = flags & ~(1 << 0);
    println("flags after clear 0: {flags}");

    bool bit2 = (flags & (1 << 2)) != 0;
    if (bit2) {
        println("bit 2 is set");
    }

    return 0;
}
