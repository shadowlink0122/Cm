
// Basic pointer test
import std::io::println;

int main() {
    // 1. Basic pointer to int
    int x = 10;
    int* p = &x;
    
    // println("x = 10");
    if (x != 10) {
        println("FAILED: x init");
        return 1;
    }
    if (*p != 10) {
        println("FAILED: *p init");
        return 1;
    }
    
    // Modification via pointer
    *p = 20;
    // println("Set *p = 20");

    if (x != 20) {
        println("FAILED: x after *p=20");
        return 1;
    }
    if (*p != 20) {
        println("FAILED: *p after *p=20");
        return 1;
    }
    
    // 2. Pointer aliasing
    int* q = p;
    *q = 30;
    // println("Set *q = 30");
    
    if (x != 30) {
        println("FAILED: x after *q=30");
        return 1;
    }

    // 3. Pointer to pointer
    int** pp = &p;
    **pp = 40;
    // println("Set **pp = 40");

    if (x != 40) {
        println("FAILED: x after **pp=40");
        return 1;
    }

    println("PASSED");
    return 0;
}
