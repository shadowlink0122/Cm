// string_utils.cm - 文字列ユーティリティモジュール
// v4モジュールシステムテスト: 混合エクスポートスタイル

// 宣言時エクスポート - typedef
export typedef StringList = string[];

// 宣言時エクスポート - interface
export interface Stringable {
    string to_string();
};

// 宣言時エクスポート - struct
export struct StringBuilder {
    string buffer;
    int length;
};

// 非エクスポート関数（内部使用）
int strlen_internal(string s) {
    // 実際の実装は省略
    return 0;
}

// エクスポートする関数
export int strlen(string s) {
    return strlen_internal(s);
}

export string concat(string a, string b) {
    // 実際の実装は省略
    return a;
}

export string uppercase(string s) {
    // 実際の実装は省略
    return s;
}

export string lowercase(string s) {
    // 実際の実装は省略
    return s;
}

// impl全体をエクスポート
export impl StringBuilder for Stringable {
    string to_string() {
        return this.buffer;
    }
};

// プライベート実装（エクスポートしない）
impl StringBuilder {
    void clear() {
        this.buffer = "";
        this.length = 0;
    }
};