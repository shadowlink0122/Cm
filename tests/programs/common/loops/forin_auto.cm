// for-in文でautoキーワードを使用するテスト
// 多次元配列、スライス、構造体配列など様々な型で検証
import std::io::println;

struct Point {
    int x;
    int y;
}

int main() {
    // 1次元固定配列 with auto
    int[5] arr1d = [1, 2, 3, 4, 5];
    int sum1 = 0;
    for (auto x in arr1d) {
        sum1 = sum1 + x;
    }
    println("1D array sum: {sum1}");

    // 1次元スライス with auto
    int[] slice1d = [10, 20, 30];
    int sum2 = 0;
    for (auto x in slice1d) {
        sum2 = sum2 + x;
    }
    println("1D slice sum: {sum2}");

    // 2次元固定配列 with auto（各行は配列）
    int[3][2] arr2d = [[1, 2, 3], [4, 5, 6]];
    int row_count = 0;
    for (auto row in arr2d) {
        int first = row[0];
        println("row {row_count} first: {first}");
        row_count = row_count + 1;
    }

    // 構造体配列 with auto
    Point[3] points = [
        Point{x: 1, y: 2},
        Point{x: 3, y: 4},
        Point{x: 5, y: 6}
    ];
    int point_sum = 0;
    for (auto p in points) {
        point_sum = point_sum + p.x + p.y;
    }
    println("point sum: {point_sum}");

    // 空のスライス（ループが実行されないことを確認）
    int[] empty = [];
    int empty_count = 0;
    for (auto x in empty) {
        empty_count = empty_count + 1;
    }
    println("empty count: {empty_count}");

    // 文字列配列 with auto
    string[3] names = ["Alice", "Bob", "Charlie"];
    int name_count = 0;
    for (auto name in names) {
        name_count = name_count + 1;
    }
    println("name count: {name_count}");

    return 0;
}
