// LLVM Native用のmap/filterテスト
import std::io::println;

int double_it(int x) {
    return x * 2;
}

bool is_even(int x) {
    return x % 2 == 0;
}

int main() {
    int[5] arr = [1, 2, 3, 4, 5];

    // mapテスト
    int[] mapped = arr.map(double_it);
    int map_len = mapped.len();
    println("map_len = {map_len}");
    if (map_len != 5) {
        println("FAIL: map");
        return 1;
    }

    // filterテスト
    int[] filtered = arr.filter(is_even);
    int filter_len = filtered.len();
    println("filter_len = {filter_len}");
    if (filter_len != 2) {
        println("FAIL: filter");
        return 2;
    }

    println("PASS: map/filter");
    return 0;
}
