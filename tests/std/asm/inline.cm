// tests/std/asm/inline.cm
// std::asm 任意インラインアセンブリテスト

import std::io::println;
import std::asm::{asm, volatile_asm};

int main() {
    println("=== asm/inline test ===");
    
    // 基本的な asm() 呼び出し
    println("--- asm(string) ---");
    asm("nop");
    println("asm nop: ok");
    
    // バリア命令
    asm("mfence");
    println("asm mfence: ok");
    
    // volatile_asm（最適化で削除されない）
    println("--- volatile_asm ---");
    volatile_asm("nop");
    volatile_asm("pause");
    println("volatile_asm: ok");
    
    // 複数命令の連続実行
    println("--- sequence ---");
    asm("nop");
    asm("nop");
    asm("nop");
    println("sequence: ok");
    
    println("=== inline complete ===");
    return 0;
}
