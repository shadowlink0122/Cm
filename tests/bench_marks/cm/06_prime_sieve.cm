// ベンチマーク6: 素数計算（エラトステネスの篩）
// 100,000までの素数を効率的に計算

import std::io;

int count_primes_sieve(int limit) {
    // 固定長配列（100,001要素）
    bool[100001] is_prime;

    // 初期化：全てtrueに設定
    for (int i = 0; i <= limit; i++) {
        is_prime[i] = true;
    }

    is_prime[0] = false;
    is_prime[1] = false;

    // エラトステネスの篩
    for (int i = 2; i * i <= limit; i++) {
        if (is_prime[i]) {
            for (int j = i * i; j <= limit; j = j + i) {
                is_prime[j] = false;
            }
        }
    }

    // 素数をカウント
    int count = 0;
    for (int i = 2; i <= limit; i++) {
        if (is_prime[i]) {
            count++;
        }
    }

    return count;
}

int main() {
    int limit = 100000;
    int count = count_primes_sieve(limit);

    println("Prime numbers up to {limit} (sieve): {count}");
    return 0;
}